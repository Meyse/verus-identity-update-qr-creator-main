<!-- Updated: add invoice slippage quick buttons and "Same as signer" destination helper. -->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Verus Request QR Creator</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <main class="container">
      <header class="page-header">
        <h1>Verus Request QR Creator</h1>
        <p class="subtitle">
          Generate GenericRequest payloads for testnet. RPC credentials loaded from config.js.
        </p>

        <section class="global-signing-id card">
          <label>
            Signing ID
            <select id="global-signing-id-select">
              <option value="">Loading identities...</option>
            </select>
            <input id="global-signing-id" type="text" placeholder="Or type an i-address manually" />
            <span class="help">Select from wallet or type an i-address. Used by all tabs when signing.</span>
          </label>
        </section>

        <nav class="tab-nav" role="tablist" aria-label="Request types">
          <button class="tab-button" type="button" data-tab="update" aria-pressed="true">
            Update Identity
          </button>
          <button class="tab-button" type="button" data-tab="auth" aria-pressed="false">
            Authentication
          </button>
          <button class="tab-button" type="button" data-tab="invoice" aria-pressed="false">
            Invoice
          </button>
          <button class="tab-button" type="button" data-tab="app-encryption" aria-pressed="false">
            App Encryption
          </button>
          <button class="tab-button" type="button" data-tab="data-packet" aria-pressed="false">
            Data Packet
          </button>
          <button class="tab-button" type="button" data-tab="user-data" aria-pressed="false">
            User Data
          </button>
        </nav>
      </header>

      <!-- ===================== UPDATE IDENTITY TAB ===================== -->
      <section class="tab-panel" data-tab-panel="update">
        <div class="split-layout">
          <div class="split-inputs">
            <form id="update-form">
              <section class="card">
                <h2>Update Identity Request</h2>

                <label>
                  Request ID <span class="tag optional">optional</span>
                  <div class="input-with-action">
                    <input id="update-request-id" name="requestId" type="text" placeholder="e.g. iJitWFN8PY37GrBVtF38HyftG8WohWipbL" />
                    <button id="update-request-id-generate" type="button">Generate</button>
                  </div>
                  <span class="help">Unique i-address for tracking this request.</span>
                </label>

                <label>
                  Identity Changes JSON
                  <textarea id="update-identity-changes" name="identityChanges" rows="8">{
  "name": "player7"
}</textarea>
                  <span class="help">JSON object describing the identity fields to update.</span>
                </label>

                <label>
                  Redirects JSON <span class="tag optional">optional</span>
                  <textarea id="update-redirects" name="redirects" rows="4">[]</textarea>
                  <span class="help">Array of redirect objects. Type "1" = redirect, "2" = POST callback.</span>
                </label>
              </section>

              <section class="card">
                <h2>Content Multi-Map</h2>
                <p class="hint small">
                  Optional override applied to contentmultimap in Identity Changes JSON.
                </p>
                <div class="stack">
                  <label class="checkbox">
                    <input id="update-enable-content-multimap" type="checkbox" checked />
                    Set contentmultimap
                  </label>
                  <label>
                    Content multimap JSON
                    <textarea id="update-content-multimap" rows="10" disabled>{
  "iP2cgAhoWvJr28BhJiTQPD7KBqAXbJNYeW": {
    "data": {
      "createmmr": true,
      "mmrdata": [
        {
          "message": "{\"rail_transport\": 43326.71}"
        }
      ],
      "mmrhashtype": "sha256",
      "hashtype": "sha256"
    }
  }
}</textarea>
                  </label>
                </div>
              </section>

              <section class="card">
                <h2>Authority Updates</h2>
                <p class="hint small">
                  Optional overrides applied on top of Identity Changes JSON.
                </p>
                <div class="stack">
                  <label class="checkbox">
                    <input id="update-enable-primary-addresses" type="checkbox" />
                    Set primary address(es)
                  </label>
                  <label>
                    Primary addresses
                    <textarea
                      id="update-primary-addresses"
                      rows="3"
                      placeholder='["RAddr1","RAddr2"] or comma-separated'
                      disabled
                    ></textarea>
                    <span class="help">Accepts JSON array or comma-separated list. Must start with "R".</span>
                  </label>
                </div>
                <div class="stack">
                  <label class="checkbox">
                    <input id="update-enable-revocation-authority" type="checkbox" />
                    Set revocation authority
                  </label>
                  <label>
                    Revocation authority (i-address)
                    <input id="update-revocation-authority" type="text" disabled placeholder="e.g. iJitWFN8PY37GrBVtF38HyftG8WohWipbL" />
                  </label>
                </div>
                <div class="stack">
                  <label class="checkbox">
                    <input id="update-enable-recovery-authority" type="checkbox" />
                    Set recovery authority
                  </label>
                  <label>
                    Recovery authority (i-address)
                    <input id="update-recovery-authority" type="text" disabled placeholder="e.g. iJitWFN8PY37GrBVtF38HyftG8WohWipbL" />
                  </label>
                </div>
              </section>

              <div class="actions">
                <button id="update-submit-button" type="submit">Generate QR</button>
                <span id="update-status" class="status" aria-live="polite"></span>
              </div>
              <div id="update-error" class="error" hidden></div>
            </form>

            <section id="update-result" class="card" hidden>
              <h2>Result</h2>
              <div class="result-grid">
                <div class="qr-wrapper">
                  <img id="update-qr-image" alt="QR Code" />
                </div>
                <div class="result-details">
                  <label>
                    Deeplink URI
                    <textarea id="update-deeplink" rows="6" readonly></textarea>
                  </label>
                  <button id="update-copy-button" type="button">Copy deeplink</button>
                </div>
              </div>
            </section>
          </div>

          <!-- RIGHT COLUMN: REFERENCE CARDS -->
          <aside class="split-reference">
            <div class="ref-card">
              <h3>Request ID</h3>
              <p class="ref-desc">Optional unique i-address to identify this specific request.</p>
              <div class="ref-snippet">
                <code>iJitWFN8PY37GrBVtF38HyftG8WohWipbL</code>
                <button class="copy-btn" type="button" data-copy="iJitWFN8PY37GrBVtF38HyftG8WohWipbL" title="Copy">Copy</button>
              </div>
            </div>

            <div class="ref-card">
              <h3>Identity Changes JSON</h3>
              <p class="ref-desc">A JSON object with the identity fields you want to update. At minimum, include "name".</p>
              <div class="ref-snippet">
<pre><code>{
  "name": "player7"
}</code></pre>
                <button class="copy-btn" type="button" data-copy='{"name":"player7"}' title="Copy">Copy</button>
              </div>
              <p class="ref-desc" style="margin-top:8px;">Full example with contentmultimap:</p>
              <div class="ref-snippet">
<pre><code>{
  "name": "player7",
  "contentmultimap": {
    "iP2cgAhoWvJr28BhJiTQPD7KBqAXbJNYeW": {
      "data": {
        "createmmr": true,
        "mmrdata": [
          {
            "message": "{\"rail_transport\": 43326.71}"
          }
        ],
        "mmrhashtype": "sha256",
        "hashtype": "sha256"
      }
    }
  }
}</code></pre>
                <button class="copy-btn" type="button" data-copy='{"name":"player7","contentmultimap":{"iP2cgAhoWvJr28BhJiTQPD7KBqAXbJNYeW":{"data":{"createmmr":true,"mmrdata":[{"message":"{\"rail_transport\": 43326.71}"}],"mmrhashtype":"sha256","hashtype":"sha256"}}}}' title="Copy">Copy</button>
              </div>
            </div>

            <div class="ref-card">
              <h3>Content Multi-Map JSON</h3>
              <p class="ref-desc">Keyed by VDXF key i-address. Supports MMR data, hex strings, and nested objects.</p>
              <div class="ref-snippet">
<pre><code>{
  "iP2cgAhoWvJr28BhJiTQPD7KBqAXbJNYeW": {
    "data": {
      "createmmr": true,
      "mmrdata": [
        { "message": "{\"key\": \"value\"}" }
      ],
      "mmrhashtype": "sha256",
      "hashtype": "sha256"
    }
  }
}</code></pre>
                <button class="copy-btn" type="button" data-copy='{"iP2cgAhoWvJr28BhJiTQPD7KBqAXbJNYeW":{"data":{"createmmr":true,"mmrdata":[{"message":"{\"key\": \"value\"}"}],"mmrhashtype":"sha256","hashtype":"sha256"}}}' title="Copy">Copy</button>
              </div>
              <p class="ref-desc" style="margin-top:8px;">Hex string value:</p>
              <div class="ref-snippet">
<pre><code>{
  "iB9w3n2QiKXKhs8xHny5PLjNGBtdJqKTTx":
    "6868686868686868686868686868686868686868"
}</code></pre>
                <button class="copy-btn" type="button" data-copy='{"iB9w3n2QiKXKhs8xHny5PLjNGBtdJqKTTx":"6868686868686868686868686868686868686868"}' title="Copy">Copy</button>
              </div>
            </div>

            <div class="ref-card">
              <h3>Redirects JSON</h3>
              <p class="ref-desc">Array of redirect objects. Type <strong>"1"</strong> = user redirect (URL param), <strong>"2"</strong> = POST callback.</p>
              <div class="ref-snippet">
<pre><code>[
  { "type": "1", "uri": "https://www.verus.io" },
  { "type": "2", "uri": "https://api.example.com/callback" }
]</code></pre>
                <button class="copy-btn" type="button" data-copy='[{"type":"1","uri":"https://www.verus.io"},{"type":"2","uri":"https://api.example.com/callback"}]' title="Copy">Copy</button>
              </div>
            </div>

            <div class="ref-card">
              <h3>Authority Fields</h3>
              <p class="ref-desc">Primary addresses must start with <strong>"R"</strong>. Revocation and recovery authorities are i-addresses.</p>
              <div class="ref-snippet">
                <code>Primary: ["RAddress1", "RAddress2"]</code>
              </div>
              <div class="ref-snippet" style="margin-top:6px;">
                <code>Revocation / Recovery: iJitWFN8PY37...bL</code>
              </div>
            </div>
          </aside>
        </div>
      </section>

      <!-- ===================== AUTHENTICATION TAB ===================== -->
      <section class="tab-panel" data-tab-panel="auth" hidden>
        <div class="split-layout">
          <div class="split-inputs">
            <form id="auth-form">
              <section class="card">
                <h2>Authentication Request</h2>

                <label>
                  Request ID <span class="tag required">required</span>
                  <div class="input-with-action">
                    <input id="auth-request-id" name="requestId" type="text" required placeholder="e.g. iJitWFN8PY37GrBVtF38HyftG8WohWipbL" />
                    <button id="auth-request-id-generate" type="button">Generate</button>
                  </div>
                  <span class="help">Required i-address identifying this auth request.</span>
                </label>

                <label>
                  Expiry time <span class="tag optional">optional</span>
                  <input id="auth-expiry-time" name="expiryTime" type="text" placeholder="e.g. 1700000000" />
                  <span class="help">Positive unix timestamp (seconds) when the request expires.</span>
                </label>

                <div class="grid">
                  <label>
                    Recipient constraint type
                    <select id="auth-recipient-constraint-type">
                      <option value="">None</option>
                      <option value="1">1 &mdash; Required ID</option>
                      <option value="2">2 &mdash; Required System</option>
                      <option value="3">3 &mdash; Required Parent</option>
                    </select>
                    <span class="help">Restricts who can respond to this request.</span>
                  </label>
                  <label>
                    Recipient constraint identity (i-address)
                    <input id="auth-recipient-constraint-identity" type="text" disabled placeholder="e.g. iJitWFN8PY37GrBVtF38HyftG8WohWipbL" />
                  </label>
                </div>

                <label>
                  Redirects JSON <span class="tag optional">optional</span>
                  <textarea id="auth-redirects" name="redirects" rows="4">[]</textarea>
                  <span class="help">Array of redirect objects. Type "1" = redirect, "2" = POST callback.</span>
                </label>
              </section>

              <div class="actions">
                <button id="auth-submit-button" type="submit">Generate QR</button>
                <span id="auth-status" class="status" aria-live="polite"></span>
              </div>
              <div id="auth-error" class="error" hidden></div>
            </form>

            <section id="auth-result" class="card" hidden>
              <h2>Result</h2>
              <div class="result-grid">
                <div class="qr-wrapper">
                  <img id="auth-qr-image" alt="QR Code" />
                </div>
                <div class="result-details">
                  <label>
                    Deeplink URI
                    <textarea id="auth-deeplink" rows="6" readonly></textarea>
                  </label>
                  <button id="auth-copy-button" type="button">Copy deeplink</button>
                </div>
              </div>
            </section>
          </div>

          <!-- RIGHT COLUMN: REFERENCE CARDS -->
          <aside class="split-reference">
            <div class="ref-card">
              <h3>Request ID</h3>
              <p class="ref-desc">Required i-address to uniquely identify this authentication request.</p>
              <div class="ref-snippet">
                <code>iJitWFN8PY37GrBVtF38HyftG8WohWipbL</code>
                <button class="copy-btn" type="button" data-copy="iJitWFN8PY37GrBVtF38HyftG8WohWipbL" title="Copy">Copy</button>
              </div>
            </div>

            <div class="ref-card">
              <h3>Expiry Time</h3>
              <p class="ref-desc">Optional positive unix timestamp (seconds). Leave empty for no expiry.</p>
              <div class="ref-snippet">
                <code>1700000000</code>
                <button class="copy-btn" type="button" data-copy="1700000000" title="Copy">Copy</button>
              </div>
            </div>

            <div class="ref-card">
              <h3>Recipient Constraint</h3>
              <p class="ref-desc">Restricts which identity can respond. Choose a type and provide the corresponding i-address.</p>
              <div class="ref-snippet">
<pre><code>Type 1 &mdash; Required ID
Type 2 &mdash; Required System
Type 3 &mdash; Required Parent</code></pre>
              </div>
              <p class="ref-desc" style="margin-top:8px;">Example identity:</p>
              <div class="ref-snippet">
                <code>iJitWFN8PY37GrBVtF38HyftG8WohWipbL</code>
                <button class="copy-btn" type="button" data-copy="iJitWFN8PY37GrBVtF38HyftG8WohWipbL" title="Copy">Copy</button>
              </div>
            </div>

            <div class="ref-card">
              <h3>Redirects JSON</h3>
              <p class="ref-desc">Array of redirect objects. Type <strong>"1"</strong> = user redirect, <strong>"2"</strong> = POST callback.</p>
              <div class="ref-snippet">
<pre><code>[
  { "type": "1", "uri": "https://www.verus.io" },
  { "type": "2", "uri": "https://api.example.com/callback" }
]</code></pre>
                <button class="copy-btn" type="button" data-copy='[{"type":"1","uri":"https://www.verus.io"},{"type":"2","uri":"https://api.example.com/callback"}]' title="Copy">Copy</button>
              </div>
            </div>
          </aside>
        </div>
      </section>
      <!-- ===================== INVOICE TAB ===================== -->
      <section class="tab-panel" data-tab-panel="invoice" hidden>
        <div class="split-layout">
          <div class="split-inputs">
            <form id="invoice-form">
              <section class="card">
                <h2>VerusPay Invoice Request</h2>

                <label class="checkbox">
                  <input id="invoice-signed" type="checkbox" checked />
                  Sign this request
                  <span class="help" style="margin-left:8px;">When unchecked, the invoice is unsigned (no RPC call needed).</span>
                </label>

                <label>
                  Requested Currency ID <span class="tag required">required</span>
                  <input id="invoice-currency-search" type="search" placeholder="Search currencies by name or i-address" />
                  <select id="invoice-currency-id-select">
                    <option value="">Loading currencies...</option>
                  </select>
                  <span class="help">Search and select a currency. The selected i-address is used for the invoice.</span>
                </label>
              </section>

              <section class="card">
                <h2>Amount</h2>
                <div class="stack">
                  <label class="checkbox">
                    <input id="invoice-accepts-any-amount" type="checkbox" />
                    Accepts any amount
                  </label>
                  <label>
                    Amount
                    <input id="invoice-amount" type="text" placeholder="e.g. 0.5 or 100" />
                    <span class="help">Amount in currency units (e.g. 0.5 = half a coin). Disabled when "accepts any amount" is checked.</span>
                  </label>
                </div>
              </section>

              <section class="card">
                <h2>Destination</h2>
                <div class="stack">
                  <label class="checkbox">
                    <input id="invoice-accepts-any-destination" type="checkbox" />
                    Accepts any destination
                  </label>
                  <div class="grid">
                    <label>
                      Destination type
                      <select id="invoice-destination-type">
                        <option value="pkh">PKH (R-address)</option>
                        <option value="id">ID (i-address)</option>
                      </select>
                    </label>
                    <label>
                      Destination address
                      <div class="input-with-action">
                        <input id="invoice-destination-address" type="text" placeholder="e.g. R9J8E2no2HVjQmzX6Ntes2ShSGcn7WiRcx" />
                        <button id="invoice-destination-same-as-signer" type="button">Same as signer</button>
                      </div>
                    </label>
                  </div>
                </div>
              </section>

              <section class="card">
                <h2>Flags</h2>
                <p class="hint small">
                  Toggle VerusPay invoice flags. Fields appear when their flag is enabled.
                </p>

                <div class="stack">
                  <label class="checkbox">
                    <input id="invoice-is-testnet" type="checkbox" checked />
                    Testnet
                  </label>

                  <label class="checkbox">
                    <input id="invoice-accepts-conversion" type="checkbox" />
                    Accepts conversion
                  </label>
                  <label id="invoice-slippage-group" hidden>
                    Max estimated slippage (%)
                    <input id="invoice-max-slippage" type="text" placeholder="e.g. 5" />
                    <div class="quick-buttons" role="group" aria-label="Quick slippage values">
                      <button type="button" data-slippage-value="1">1%</button>
                      <button type="button" data-slippage-value="2">2%</button>
                      <button type="button" data-slippage-value="5">5%</button>
                      <button type="button" data-slippage-value="10">10%</button>
                    </div>
                    <span class="help">Maximum slippage as a percentage (e.g. 5 = 5%).</span>
                  </label>

                  <label class="checkbox">
                    <input id="invoice-expires" type="checkbox" />
                    Expires
                  </label>
                  <label id="invoice-expiry-group" hidden>
                    Expiry height (block number)
                    <input id="invoice-expiry-height" type="text" placeholder="e.g. 2000000" />
                    <span class="help">Block height after which this invoice is no longer valid.</span>
                  </label>

                  <label class="checkbox">
                    <input id="invoice-accepts-non-verus" type="checkbox" />
                    Accepts non-Verus systems
                  </label>
                  <label id="invoice-accepted-systems-group" hidden>
                    Accepted system i-addresses (comma-separated)
                    <input id="invoice-accepted-systems" type="text" placeholder="e.g. iNC9NG5Jqk2tqVtqfjfiSpaqxrXaFU6RDu, iBDkVJqik6BrtcDBQfFygffiYzTMy6EuhU" />
                    <span class="help">Comma-separated list of system i-addresses.</span>
                  </label>

                  <label class="checkbox">
                    <input id="invoice-is-preconvert" type="checkbox" />
                    Preconvert
                  </label>

                  <label class="checkbox">
                    <input id="invoice-is-tagged" type="checkbox" />
                    Tagged
                  </label>
                  <label id="invoice-tag-group" hidden>
                    Tag address (x-address)
                    <input id="invoice-tag-address" type="text" placeholder="e.g. xA91QPpBrHZto92NCU5KEjCqRveS4dAPrf" />
                    <span class="help">An x-address tag for the invoice.</span>
                  </label>
                </div>
              </section>

              <section class="card">
                <label>
                  Redirects JSON <span class="tag optional">optional</span>
                  <textarea id="invoice-redirects" name="redirects" rows="4">[]</textarea>
                  <span class="help">Array of redirect objects. Type "1" = redirect, "2" = POST callback.</span>
                </label>
              </section>

              <div class="actions">
                <button id="invoice-submit-button" type="submit">Generate QR</button>
                <span id="invoice-status" class="status" aria-live="polite"></span>
              </div>
              <div id="invoice-error" class="error" hidden></div>
            </form>

            <section id="invoice-result" class="card" hidden>
              <h2>Result</h2>
              <div class="result-grid">
                <div class="qr-wrapper">
                  <img id="invoice-qr-image" alt="QR Code" />
                </div>
                <div class="result-details">
                  <label>
                    Deeplink URI
                    <textarea id="invoice-deeplink" rows="6" readonly></textarea>
                  </label>
                  <button id="invoice-copy-button" type="button">Copy deeplink</button>
                </div>
              </div>
            </section>
          </div>

          <!-- RIGHT COLUMN: REFERENCE CARDS -->
          <aside class="split-reference">
            <div class="ref-card">
              <h3>Requested Currency ID</h3>
              <p class="ref-desc">The i-address of the currency you want to be paid in. VRSCTEST example:</p>
              <div class="ref-snippet">
                <code>iJhCezBExJHvtyH3fGhNnt2NhU4Ztkf2yq</code>
                <button class="copy-btn" type="button" data-copy="iJhCezBExJHvtyH3fGhNnt2NhU4Ztkf2yq" title="Copy">Copy</button>
              </div>
            </div>

            <div class="ref-card">
              <h3>Amount</h3>
              <p class="ref-desc">Amount in normal currency units (up to 8 decimals). Examples:</p>
              <div class="ref-snippet">
                <code>0.5</code> = half a coin &nbsp;&nbsp; <code>100</code> = 100 coins
              </div>
            </div>

            <div class="ref-card">
              <h3>Destination</h3>
              <p class="ref-desc">Where the payment should be sent. PKH = R-address, ID = i-address.</p>
              <div class="ref-snippet">
                <code>R9J8E2no2HVjQmzX6Ntes2ShSGcn7WiRcx</code>
                <button class="copy-btn" type="button" data-copy="R9J8E2no2HVjQmzX6Ntes2ShSGcn7WiRcx" title="Copy">Copy</button>
              </div>
            </div>

            <div class="ref-card">
              <h3>Invoice Flags</h3>
              <p class="ref-desc">Flags control which fields are active and how the wallet interprets the invoice:</p>
              <div class="ref-snippet">
<pre><code>acceptsAnyAmount - payer chooses amount
acceptsAnyDest   - payer chooses dest
acceptsConversion- allow currency conversion
expires          - enforce block-height expiry
nonVerusSystems  - accept other chains
isPreconvert     - preconvert to currency
isTagged         - attach x-address tag
isTestnet        - mark as testnet</code></pre>
              </div>
            </div>

            <div class="ref-card">
              <h3>Signed vs Unsigned</h3>
              <p class="ref-desc">
                When <strong>signed</strong>, the request is hashed and signed via your wallet's RPC using the global Signing ID.
                When <strong>unsigned</strong>, no RPC is needed and no signature is attached.
              </p>
            </div>

            <div class="ref-card">
              <h3>Redirects JSON</h3>
              <p class="ref-desc">Array of redirect objects. Type <strong>"1"</strong> = user redirect, <strong>"2"</strong> = POST callback.</p>
              <div class="ref-snippet">
<pre><code>[
  { "type": "1", "uri": "https://www.verus.io" },
  { "type": "2", "uri": "https://api.example.com/callback" }
]</code></pre>
                <button class="copy-btn" type="button" data-copy='[{"type":"1","uri":"https://www.verus.io"},{"type":"2","uri":"https://api.example.com/callback"}]' title="Copy">Copy</button>
              </div>
            </div>
          </aside>
        </div>
      </section>

      <!-- ===================== APP ENCRYPTION TAB ===================== -->
      <section class="tab-panel" data-tab-panel="app-encryption" hidden>
        <div class="split-layout">
          <div class="split-inputs">
            <form id="app-encryption-form">
              <section class="card">
                <h2>App Encryption Request</h2>
                <p class="hint">Request encryption keys or encrypted data from a VerusID.</p>

                <label>
                  Request ID <span class="tag optional">optional</span>
                  <div class="input-with-action">
                    <input id="app-encryption-request-id" name="requestId" type="text" placeholder="e.g. iJitWFN8PY37GrBVtF38HyftG8WohWipbL" />
                    <button id="app-encryption-request-id-generate" type="button">Generate</button>
                  </div>
                  <span class="help">Unique i-address for tracking this request.</span>
                </label>

                <label>
                  Redirects JSON <span class="tag optional">optional</span>
                  <textarea id="app-encryption-redirects" name="redirects" rows="4">[]</textarea>
                  <span class="help">Array of redirect objects. Type "1" = redirect, "2" = POST callback.</span>
                </label>
              </section>

              <div class="actions">
                <button id="app-encryption-submit-button" type="submit">Generate QR</button>
                <span id="app-encryption-status" class="status" aria-live="polite"></span>
              </div>
              <div id="app-encryption-error" class="error" hidden></div>
            </form>

            <section id="app-encryption-result" class="card" hidden>
              <h2>Result</h2>
              <div class="result-grid">
                <div class="qr-wrapper">
                  <img id="app-encryption-qr-image" alt="QR Code" />
                </div>
                <div class="result-details">
                  <label>
                    Deeplink URI
                    <textarea id="app-encryption-deeplink" rows="6" readonly></textarea>
                  </label>
                  <button id="app-encryption-copy-button" type="button">Copy deeplink</button>
                </div>
              </div>
            </section>
          </div>

          <aside class="split-reference">
            <div class="ref-card">
              <h3>App Encryption Request</h3>
              <p class="ref-desc">Requests encryption-related data from a VerusID for app-level encryption.</p>
            </div>
          </aside>
        </div>
      </section>

      <!-- ===================== DATA PACKET TAB ===================== -->
      <section class="tab-panel" data-tab-panel="data-packet" hidden>
        <div class="split-layout">
          <div class="split-inputs">
            <form id="data-packet-form">
              <section class="card">
                <h2>Data Packet Request</h2>
                <p class="hint">Request a signed data packet from a VerusID.</p>

                <label>
                  Request ID <span class="tag optional">optional</span>
                  <div class="input-with-action">
                    <input id="data-packet-request-id" name="requestId" type="text" placeholder="e.g. iJitWFN8PY37GrBVtF38HyftG8WohWipbL" />
                    <button id="data-packet-request-id-generate" type="button">Generate</button>
                  </div>
                  <span class="help">Unique i-address for tracking this request.</span>
                </label>

                <label>
                  Redirects JSON <span class="tag optional">optional</span>
                  <textarea id="data-packet-redirects" name="redirects" rows="4">[]</textarea>
                  <span class="help">Array of redirect objects. Type "1" = redirect, "2" = POST callback.</span>
                </label>
              </section>

              <div class="actions">
                <button id="data-packet-submit-button" type="submit">Generate QR</button>
                <span id="data-packet-status" class="status" aria-live="polite"></span>
              </div>
              <div id="data-packet-error" class="error" hidden></div>
            </form>

            <section id="data-packet-result" class="card" hidden>
              <h2>Result</h2>
              <div class="result-grid">
                <div class="qr-wrapper">
                  <img id="data-packet-qr-image" alt="QR Code" />
                </div>
                <div class="result-details">
                  <label>
                    Deeplink URI
                    <textarea id="data-packet-deeplink" rows="6" readonly></textarea>
                  </label>
                  <button id="data-packet-copy-button" type="button">Copy deeplink</button>
                </div>
              </div>
            </section>
          </div>

          <aside class="split-reference">
            <div class="ref-card">
              <h3>Data Packet Request</h3>
              <p class="ref-desc">Requests a signed data packet containing arbitrary data from a VerusID.</p>
            </div>
          </aside>
        </div>
      </section>

      <!-- ===================== USER DATA TAB ===================== -->
      <section class="tab-panel" data-tab-panel="user-data" hidden>
        <div class="split-layout">
          <div class="split-inputs">
            <form id="user-data-form">
              <section class="card">
                <h2>User Data Request</h2>
                <p class="hint">Request user data from a VerusID.</p>

                <label>
                  Request ID <span class="tag optional">optional</span>
                  <div class="input-with-action">
                    <input id="user-data-request-id" name="requestId" type="text" placeholder="e.g. iJitWFN8PY37GrBVtF38HyftG8WohWipbL" />
                    <button id="user-data-request-id-generate" type="button">Generate</button>
                  </div>
                  <span class="help">Unique i-address for tracking this request.</span>
                </label>

                <label>
                  Redirects JSON <span class="tag optional">optional</span>
                  <textarea id="user-data-redirects" name="redirects" rows="4">[]</textarea>
                  <span class="help">Array of redirect objects. Type "1" = redirect, "2" = POST callback.</span>
                </label>
              </section>

              <div class="actions">
                <button id="user-data-submit-button" type="submit">Generate QR</button>
                <span id="user-data-status" class="status" aria-live="polite"></span>
              </div>
              <div id="user-data-error" class="error" hidden></div>
            </form>

            <section id="user-data-result" class="card" hidden>
              <h2>Result</h2>
              <div class="result-grid">
                <div class="qr-wrapper">
                  <img id="user-data-qr-image" alt="QR Code" />
                </div>
                <div class="result-details">
                  <label>
                    Deeplink URI
                    <textarea id="user-data-deeplink" rows="6" readonly></textarea>
                  </label>
                  <button id="user-data-copy-button" type="button">Copy deeplink</button>
                </div>
              </div>
            </section>
          </div>

          <aside class="split-reference">
            <div class="ref-card">
              <h3>User Data Request</h3>
              <p class="ref-desc">Requests user-specific data stored on or associated with a VerusID.</p>
            </div>
          </aside>
        </div>
      </section>
    </main>

    <script src="/app.js"></script>
  </body>
</html>
